<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Accept / Reject Invitation</title>
  <style>
    :root{
      --blue:#14699F;         /* primary button */
      --blue-ink:#0b3f66;
      --bg:#ffffff;
      --ink:#0f172a;
      --muted:#6b7280;
      --line:#e5e7eb;
      --shadow: 0 10px 25px rgba(2, 8, 23, .08);
      --radius: 16px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
      background:#fff;
      color:var(--ink);
    }

    /* Page frame */
    .app{
      min-height:100vh;
      display:flex;
      flex-direction:column;
      background:var(--bg);
    }

    .topbar{
      height:64px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:sticky;
      top:0;
      z-index:10;
      background:var(--bg);
      border-bottom:1px solid var(--line);
    }
    .topbar .back{
      position:absolute;
      left:14px;
      width:40px;
      height:40px;
      border-radius:999px;
      display:grid;
      place-items:center;
      color:#111827;
      border:1px solid transparent;
      background:transparent;
      cursor:pointer;
    }
    .topbar .back:active{transform:translateY(1px)}
    .topbar .title{
      font-weight:600;
      letter-spacing:.2px;
    }

    .wrap{
      width:min(560px, 100%);
      margin:0 auto;
      padding:22px 18px 26px;
    }

    /* Screen transitions */
    .screen{
      display:none;
      animation: fade .14s ease-out;
    }
    .screen.active{display:block}
    @keyframes fade{
      from{opacity:.4; transform:translateY(6px)}
      to{opacity:1; transform:translateY(0)}
    }

    /* Buttons */
    .btn{
      appearance:none;
      border:1px solid var(--line);
      background:#fff;
      color:var(--ink);
      border-radius:999px;
      padding:12px 16px;
      font-weight:600;
      font-size:14.5px;
      cursor:pointer;
      transition:transform .06s ease, background .15s ease, border-color .15s ease;
      user-select:none;
    }
    .btn:active{transform:translateY(1px)}
    .btn.outline-blue{
      border-color:rgba(20,105,159,.55);
      color:var(--blue-ink);
      background:rgba(20,105,159,.04);
    }
    .btn.outline-danger{
      border-color:rgba(220,38,38,.45);
      color:#991b1b;
      background:rgba(220,38,38,.04);
    }
    .btn.primary{
      border-color:transparent;
      background:var(--blue);
      color:#fff;
      padding:14px 18px;
    }
    .btn.primary:hover{filter:brightness(.98)}
    .btn.wide{
      width:100%;
      border-radius:12px;
      padding:16px 18px;
      font-size:15px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      box-shadow:0 6px 18px rgba(20,105,159,.18);
    }
    .btn.ghost{
      border-color:transparent;
      background:transparent;
      color:var(--blue-ink);
      padding:10px 12px;
      font-weight:700;
    }

    .card{
      border:1px solid var(--line);
      border-radius:var(--radius);
      background:#fff;
      box-shadow: 0 6px 20px rgba(2,8,23,.05);
      overflow:hidden;
    }

    /* Banner (simple “illustration” placeholder) */
    .banner{
      height:168px;
      border-radius:18px;
      overflow:hidden;
      border:1px solid var(--line);
      background: url('https://d34hmiuaex7c0.cloudfront.net/2952/uploads/form_value_featured_1767649962307.png');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      position:relative;
    }
    .banner .tag{
      position:absolute;
      left:16px;
      bottom:16px;
      background:#fff;
      border:1px solid var(--line);
      border-radius:999px;
      padding:10px 14px;
      font-weight:700;
      color:var(--blue-ink);
      box-shadow: var(--shadow);
    }

    .banner .dots span{
      width:7px; height:7px;
      border-radius:999px;
      background:rgba(15,23,42,.25);
    }
    .banner .dots span.active{background:rgba(15,23,42,.55)}

    /* Section title */
    .section-title{
      display:flex;
      align-items:center;
      gap:10px;
      margin:18px 0 10px;
      font-size:18px;
      font-weight:700;
    }
    .icon{
      width:28px;height:28px;border-radius:8px;
      background:rgba(20,105,159,.10);
      display:grid;place-items:center;
      color:var(--blue-ink);
    }
    /* Calendar / times (for Propose Another Date & Time) */
    .cal{
      padding:14px;
      border:1px solid var(--line);
      border-radius:18px;
      background:#fff;
      box-shadow: 0 8px 22px rgba(2,8,23,.06);
    }
    .cal-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:10px;
      font-weight:700;
    }
    .cal-head .nav{
      width:34px;height:34px;border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      cursor:pointer;
      display:grid;place-items:center;
      user-select:none;
    }
    .dow{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:6px;
      padding:6px 2px 10px;
      color:var(--muted);
      font-size:12px;
      text-align:center;
      font-weight:700;
    }
    .days{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:8px;
      padding:2px;
    }
    .day{
      height:36px;
      border-radius:999px;
      border:1px solid transparent;
      display:grid;
      place-items:center;
      cursor:pointer;
      color:var(--ink);
      font-weight:700;
      font-size:13px;
      background:#fff;
    }
    .day.muted{color:#cbd5e1; cursor:not-allowed}
    .day:hover:not(.muted){background:rgba(20,105,159,.06)}
    .day.selected{
      background:rgba(59,130,246,.14);
      border-color:rgba(59,130,246,.28);
      color:var(--blue-ink);
      font-weight:700;
    }

    .times-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin:14px 0 10px;
      color:var(--muted);
      font-weight:700;
      font-size:13px;
    }
    .times{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:10px;
    }
    .time{
      border:1px solid var(--line);
      border-radius:10px;
      padding:10px 10px;
      text-align:center;
      background:#fff;
      cursor:pointer;
      font-weight:700;
      font-size:12.5px;
    }
    .time.selected{
      border-color:rgba(59,130,246,.40);
      background:rgba(59,130,246,.10);
      color:var(--blue-ink);
    }
    .hint{
      color:var(--muted);
      font-size:13px;
      margin-top:10px;
      line-height:1.45;
    }

    @media (max-width:420px){
      .times{grid-template-columns:repeat(2,1fr)}
    }

    /* Detail blocks */
    .info{
      display:grid;
      gap:10px;
      margin:14px 0 16px;
    }
    .info .line{
      display:flex;
      gap:10px;
      color:var(--muted);
      font-size:14px;
      align-items:flex-start;
    }
    .info .line b{
      color:var(--ink);
      font-weight:700;
      min-width:118px;
      display:inline-block;
    }

    /* Form */
    .form{
      display:grid;
      gap:12px;
      margin-top:14px;
    }
    label{
      font-size:12.5px;
      color:var(--muted);
      font-weight:700;
      display:block;
      margin:0 0 7px;
    }
    .field{
      width:100%;
      border:1px solid var(--line);
      border-radius:10px;
      padding:12px 12px;
      font-size:14px;
      outline:none;
      background:#fff;
    }
    .field:focus{
      border-color:rgba(59,130,246,.45);
      box-shadow: 0 0 0 4px rgba(59,130,246,.10);
    }
    textarea.field{
      min-height:110px;
      resize:vertical;
    }

    /* Footer actions */
    .actions{
      margin-top:18px;
      display:grid;
      gap:10px;
    }

    .pillrow{display:flex; gap:10px; flex-wrap:wrap}

    .notice{
      border:1px solid rgba(20,105,159,.20);
      background:rgba(20,105,159,.06);
      padding:12px 12px;
      border-radius:14px;
      color:var(--blue-ink);
      font-weight:700;
      font-size:13px;
      line-height:1.45;
    }
    .danger{
      border:1px solid rgba(220,38,38,.22);
      background:rgba(220,38,38,.06);
      color:#7f1d1d;
    }
    .successMark{
      width:72px;height:72px;border-radius:999px;
      display:grid;place-items:center;
      background:rgba(16,185,129,.12);
      color:#065f46;
      margin:14px auto 10px;
      border:1px solid rgba(16,185,129,.22);
      font-size:34px;
      font-weight:700;
    }

    .h1{
      text-align:center;
      font-size:26px;
      line-height:1.15;
      margin:10px 0 6px;
      font-weight:700;
    }
    .sub{
      text-align:center;
      color:var(--muted);
      font-size:14.5px;
      margin:0 0 18px;
    }
  </style>
</head>

<body>
  <div class="app">
    <div class="topbar">
      <button class="back" id="backBtn" aria-label="Back">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M15 18l-6-6 6-6" stroke="#111827" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <div class="title" id="hostName">Pete Romano</div>
    </div>

    <div class="wrap">

      <!-- START: go straight to accept/reject -->
      <section class="screen active" data-screen="invite_01">
        <div class="banner" aria-hidden="true">
          <div class="tag">Virtual 1-1 Connect</div>
          <div class="dots"><span class="active"></span><span></span><span></span></div>
        </div>

        <div class="section-title">
          <div class="icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M12 22s8-4 8-10V6l-8-4-8 4v6c0 6 8 10 8 10Z" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 12l2 2 4-5" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          Meeting Invitation
        </div>

        <div class="card" style="padding:14px">
          <div style="font-weight:700; font-size:16px; margin-bottom:6px" id="meetingTitleA">Virtual 1-1 Connect</div>
          <div class="info" style="margin:0">
            <div class="line"><b>When</b> <span id="whenA">Thu, Feb 19 • 10:15 AM (America/New_York)</span></div>
            <div class="line"><b>Length</b> <span id="lenA">20 minutes</span></div>
            <div class="line"><b>Where</b> <span id="whereA">Video call link will be included after you accept</span></div>
          </div>
        </div>

        <div class="notice" style="margin-top:12px">
          If the time works, accept and you’re locked in. If not, you can decline.
        </div>

        <div class="actions">
          <button class="btn primary wide" data-go="invite_accept_01">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M20 6 9 17l-5-5" stroke="#fff" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Accept Invitation
          </button>

          <div class="pillrow">
            <button class="btn outline-danger" data-go="invite_decline_01" style="flex:1">Decline</button>
          </div>
          <div class="pillrow">
            <button class="btn outline-blue" data-go="invite_propose_01" style="flex:1">Propose Another Date & Time</button>
          </div>
        </div>
      </section>

      <!-- ACCEPTED -->
      <section class="screen" data-screen="invite_accept_01">
        <div class="successMark">✓</div>
        <div class="h1">You’re confirmed</div>
        <p class="sub">The meeting is accepted and on the calendar.</p>

        <div class="card" style="padding:14px">
          <div style="font-weight:700; font-size:16px; margin-bottom:6px" id="acceptedTitle">Virtual 1-1 Connect</div>
          <div class="info" style="margin:0">
            <div class="line"><b>When</b> <span id="acceptedWhen">Thu, Feb 19 • 10:15 AM</span></div>
            <div class="line"><b>Where</b> <span id="acceptedWhere">Video call link: (mock) https://meet.example/abc</span></div>
          </div>
        </div>

        <div class="actions">
          <button class="btn primary wide" id="doneBtn">
            Done
          </button>
          <button class="btn outline-blue" id="copyLinkBtn">Copy video link</button>
        </div>
      </section>

      <!-- DECLINE -->
      <section class="screen" data-screen="invite_decline_01">
        <div class="banner" aria-hidden="true">
          <div class="tag">Decline Invitation</div>
          <div class="dots"><span class="active"></span><span></span><span></span></div>
        </div>

        <div class="section-title">
          <div class="icon" style="background:rgba(220,38,38,.10); color:#991b1b">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M12 9v4" stroke="currentColor" stroke-width="2.4" stroke-linecap="round"/>
              <path d="M12 17h.01" stroke="currentColor" stroke-width="3.2" stroke-linecap="round"/>
              <path d="M10.3 3.7a2 2 0 0 1 3.4 0l8 13.9A2 2 0 0 1 20 20H4a2 2 0 0 1-1.7-2.4l8-13.9Z" stroke="currentColor" stroke-width="2.0" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          Confirm Decline
        </div>

        <div class="danger notice">
          This will notify the host that you can’t make it.
        </div>

        <div class="form">
          <div>
            <label>Reason (optional)</label>
            <textarea class="field" id="declineReason" placeholder="Share a quick note (optional)"></textarea>
          </div>
        </div>

        <div class="actions">
          <button class="btn primary wide" id="declineConfirmBtn" style="background:#dc2626">Decline Meeting</button>
          <button class="btn outline-blue" data-go="invite_01">Back</button>
        </div>
      </section>
      <!-- PROPOSE ANOTHER DATE/TIME (Reschedule-like) -->
      <section class="screen" data-screen="invite_propose_01">
        <div class="banner" aria-hidden="true">
          <div class="tag">Virtual 1-1 Connect</div>
          <div class="dots"><span class="active"></span><span></span><span></span></div>
        </div>

        <div class="section-title">
          <div class="icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M7 3v3M17 3v3" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
              <path d="M4 8h16" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
              <path d="M6 21h12a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2Z" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
              <path d="M8 13h8" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
            </svg>
          </div>
          Choose a New Time
        </div>

        <div class="card" style="padding:14px; margin-bottom:12px">
          <div style="font-weight:700; font-size:16px; margin-bottom:6px">Current booking</div>
          <div class="info" style="margin:0">
            <div class="line"><b>Meeting</b> <span id="paTitle">Virtual 1-1 Connect</span></div>
            <div class="line"><b>Current</b> <span id="paCurrent">Thu, Feb 19 • 10:15 AM</span></div>
            <div class="line"><b>Time zone</b> <span id="paTz">America/New_York</span></div>
          </div>
        </div>

        <div class="cal">
          <div class="cal-head">
            <button class="nav" id="paPrevMonthBtn" aria-label="Previous month">‹</button>
            <div id="paMonthLabel">February 2026</div>
            <button class="nav" id="paNextMonthBtn" aria-label="Next month">›</button>
          </div>

          <div class="dow">
            <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
          </div>

          <div class="days" id="paDaysGrid"></div>

<div class="times-head" id="paTimesHead" style="display:none">
  <div>Available Times</div>
  <div id="paSelectedDateLabel">—</div>
</div>

<div class="times" id="paTimesGrid" style="display:none"></div>


          <div class="hint">
            Pick a day and time, then confirm. You can add a note for the host before submitting.
          </div>
        </div>

        <div class="actions">
          <button class="btn primary wide" id="paNextBtn" disabled style="opacity:.55">
            Next →
          </button>
          <button class="btn outline-blue" data-go="invite_01">Back</button>
        </div>
      </section>

      <section class="screen" data-screen="invite_propose_02">
        <div class="section-title" style="margin-top:2px">
          <div class="icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v8Z" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          Propose This New Time
        </div>

        <div class="card" style="padding:14px">
          <div style="font-weight:700; font-size:16px; margin-bottom:6px">Proposed time</div>
          <div class="info" style="margin:0">
            <div class="line"><b>Meeting</b> <span id="pa2Title">Virtual 1-1 Connect</span></div>
            <div class="line"><b>Selected</b> <span id="pa2When">—</span></div>
            <div class="line"><b>Time zone</b> <span id="pa2Tz">America/New_York</span></div>
          </div>
        </div>

        <div class="form">
          <div>
            <label>Note to host (optional)</label>
            <textarea class="field" id="paNote" placeholder="Anything you’d like to share? (optional)"></textarea>
          </div>
        </div>

        <div class="actions">
          <button class="btn primary wide" id="paConfirmBtn">Send Proposal</button>
          <button class="btn outline-blue" data-go="invite_propose_01">Back</button>
        </div>
      </section>

      <section class="screen" data-screen="invite_propose_done">
        <div class="successMark">✓</div>
        <div class="h1">Proposal sent</div>
        <p class="sub">The host has been notified. You’ll get an update if they accept a new time.</p>

        <div class="card" style="padding:14px">
          <div style="font-weight:700; font-size:16px; margin-bottom:6px">Proposed meeting</div>
          <div class="info" style="margin:0">
            <div class="line"><b>When</b> <span id="paDoneWhen">—</span></div>
            <div class="line"><b>Meeting</b> <span id="paDoneTitle">Virtual 1-1 Connect</span></div>
          </div>
        </div>

        <div class="actions">
          <button class="btn primary wide" id="paDoneBtn">Done</button>
        </div>
      </section>

      <!-- DECLINED DONE -->
      <section class="screen" data-screen="invite_decline_done">
        <div class="successMark" style="background:rgba(220,38,38,.10); color:#7f1d1d; border-color:rgba(220,38,38,.20)">✕</div>
        <div class="h1">Invitation declined</div>
        <p class="sub">The host has been notified.</p>

        <div class="actions">
          <button class="btn primary wide" id="doneBtn2">Done</button>
        </div>
      </section>

    </div>
  </div>

  <script>
    /***********************
     * MOCK DATA (swap these)
     ***********************/
    const state = {
      hostName: "Pete Romano",
      meetingTitle: "Virtual 1-1 Connect",
      durationMins: 20,
      timeZone: "America/New_York",
      currentWhenText: "Thu, Feb 19 • 10:15 AM",

      // Propose Another Date & Time (reschedule-like)
      paSelectedDate: null,
      paSelectedTime: null,
      paSelectedWhenText: null
    };


    /***********************
     * SCREEN NAV
     ***********************/
    const screens = Array.from(document.querySelectorAll(".screen"));
    const backBtn = document.getElementById("backBtn");
    const hostNameEl = document.getElementById("hostName");
    hostNameEl.textContent = state.hostName;

    // Start on invite_01 (no intro screen)
    const historyStack = ["invite_01"];

    function show(screenId, pushHistory=true){
      screens.forEach(s => s.classList.toggle("active", s.dataset.screen === screenId));
      if(pushHistory){
        const last = historyStack[historyStack.length - 1];
        if(last !== screenId) historyStack.push(screenId);
      }
      // Hide back button on first screen only
      backBtn.style.visibility = (screenId === "invite_01") ? "hidden" : "visible";
    }

    backBtn.addEventListener("click", () => {
      if(historyStack.length <= 1) return;
      historyStack.pop();
      const prev = historyStack[historyStack.length - 1] || "invite_01";
      show(prev, false);
    });

    document.addEventListener("click", (e) => {
      const btn = e.target.closest("[data-go]");
      if(!btn) return;
      const target = btn.getAttribute("data-go");
      show(target);
    });

    /***********************
     * WIRE UP TEXT FIELDS
     ***********************/
    document.getElementById("meetingTitleA").textContent = state.meetingTitle;
    document.getElementById("whenA").textContent = `${state.currentWhenText} (${state.timeZone})`;
    document.getElementById("lenA").textContent = `${state.durationMins} minutes`;

    document.getElementById("acceptedTitle").textContent = state.meetingTitle;
    document.getElementById("acceptedWhen").textContent = state.currentWhenText;

    /***********************
     * COPY LINK (mock)
     ***********************/
    document.getElementById("copyLinkBtn").addEventListener("click", async () => {
      const link = "https://meet.example/abc";
      try{
        await navigator.clipboard.writeText(link);
        alert("Copied: " + link);
      }catch(err){
        prompt("Copy link:", link);
      }
    });

    /***********************
     * DECLINE -> DONE
     ***********************/
    document.getElementById("declineConfirmBtn").addEventListener("click", () => {
      // In real use: send declineReason to backend
      show("invite_decline_done");
    });
    /***********************
     * DONE (mock exit)
     ***********************/
    function done(){
      alert("Meeting Details Updated");
    }

    document.getElementById("doneBtn").addEventListener("click", done);
    document.getElementById("doneBtn2").addEventListener("click", done);


    /***********************
     * PROPOSE ANOTHER DATE/TIME
     * (Reschedule-like flow copied + IDs prefixed with pa*)
     ***********************/
    const paTitleEl = document.getElementById("paTitle");
    const paCurrentEl = document.getElementById("paCurrent");
    const paTzEl = document.getElementById("paTz");

    if(paTitleEl) paTitleEl.textContent = state.meetingTitle;
    if(paCurrentEl) paCurrentEl.textContent = state.currentWhenText;
    if(paTzEl) paTzEl.textContent = state.timeZone;

    const paMonthLabel = document.getElementById("paMonthLabel");
    const paDaysGrid = document.getElementById("paDaysGrid");
    const paTimesGrid = document.getElementById("paTimesGrid");
    const paSelectedDateLabel = document.getElementById("paSelectedDateLabel");
    const paNextBtn = document.getElementById("paNextBtn");

    let paViewYear = 2026;
    let paViewMonth = 1; // 0=Jan, 1=Feb

    const PA_DOW = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
    const PA_monthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];

    const paAvailableTimes = [
      "09:00 AM","09:15 AM","09:30 AM",
      "09:45 AM","10:00 AM","10:15 AM",
      "10:30 AM","10:45 AM","11:00 AM",
      "11:15 AM","11:30 AM","11:45 AM",
      "12:00 PM","12:15 PM","12:30 PM",
      "12:45 PM","01:00 PM","01:15 PM",
      "01:30 PM","01:45 PM","02:00 PM",
      "02:15 PM","02:30 PM","02:45 PM",
      "03:00 PM","03:15 PM","03:30 PM",
      "03:45 PM","04:45 PM"
    ];

    function paFmtMonthYear(y, m){
      return `${PA_monthNames[m]} ${y}`;
    }
    function paFirstDayOfMonth(y, m){
      return new Date(y, m, 1).getDay();
    }
    function paDaysInMonth(y, m){
      return new Date(y, m + 1, 0).getDate();
    }
    function paFormatSelectedDate(sel){
      const d = new Date(sel.y, sel.m, sel.day);
      const dow = PA_DOW[d.getDay()];
      return `${dow}, ${PA_monthNames[sel.m]} ${sel.day}, ${sel.y}`;
    }

    function paUpdateNext(){
      if(!paNextBtn) return;
      const ready = !!(state.paSelectedDate && state.paSelectedTime);
      paNextBtn.disabled = !ready;
      paNextBtn.style.opacity = ready ? "1" : ".55";
    }

    function paRenderTimes(){
      if(!paTimesGrid || !paSelectedDateLabel) return;

      paTimesGrid.innerHTML = "";
      const hasDate = !!state.paSelectedDate;

      const paTimesHead = document.getElementById("paTimesHead");
      if(!hasDate){
        if(paTimesHead) paTimesHead.style.display = "none";
        paTimesGrid.style.display = "none";
        paSelectedDateLabel.textContent = "—";
        paUpdateNext();
        return;
      }

      if(paTimesHead) paTimesHead.style.display = "flex";
      paTimesGrid.style.display = "grid";
      paSelectedDateLabel.textContent = paFormatSelectedDate(state.paSelectedDate);

      paAvailableTimes.slice(0, 18).forEach((t) => {
        const b = document.createElement("button");
        b.type = "button";
        b.className = "time";
        b.textContent = t;

        b.addEventListener("click", () => {
          state.paSelectedTime = t;
          state.paSelectedWhenText = `${paFormatSelectedDate(state.paSelectedDate)} • ${t}`;
          paRenderTimes();
        });

        if(state.paSelectedTime === t) b.classList.add("selected");
        paTimesGrid.appendChild(b);
      });

      paUpdateNext();
    }

    function paRenderCalendar(){
      if(!paMonthLabel || !paDaysGrid) return;

      paMonthLabel.textContent = paFmtMonthYear(paViewYear, paViewMonth);
      paDaysGrid.innerHTML = "";

      const firstDow = paFirstDayOfMonth(paViewYear, paViewMonth);
      const dim = paDaysInMonth(paViewYear, paViewMonth);

      for(let i=0; i<firstDow; i++){
        const d = document.createElement("div");
        d.className = "day muted";
        d.textContent = "";
        paDaysGrid.appendChild(d);
      }

      for(let day=1; day<=dim; day++){
        const d = document.createElement("div");
        d.className = "day";
        d.textContent = day;

        const dateObj = new Date(paViewYear, paViewMonth, day);
        const dow = dateObj.getDay();
        const isWeekend = (dow === 0 || dow === 6);
        const isPastLike = (paViewYear === 2026 && paViewMonth === 1 && day < 12);
        const disabled = isWeekend || isPastLike;

        if(disabled){
          d.classList.add("muted");
        }else{
          d.addEventListener("click", () => {
            state.paSelectedDate = {y: paViewYear, m: paViewMonth, day};
            state.paSelectedTime = null;
            state.paSelectedWhenText = null;
            paRenderCalendar();
          });
        }

        if(state.paSelectedDate){
          const {y,m,day:sd} = state.paSelectedDate;
          if(y===paViewYear && m===paViewMonth && sd===day) d.classList.add("selected");
        }

        paDaysGrid.appendChild(d);
      }

      paRenderTimes();
    }

    const paPrevMonthBtn = document.getElementById("paPrevMonthBtn");
    const paNextMonthBtn = document.getElementById("paNextMonthBtn");

    if(paPrevMonthBtn){
      paPrevMonthBtn.addEventListener("click", () => {
        paViewMonth -= 1;
        if(paViewMonth < 0){ paViewMonth = 11; paViewYear -= 1; }
        paRenderCalendar();
      });
    }

    if(paNextMonthBtn){
      paNextMonthBtn.addEventListener("click", () => {
        paViewMonth += 1;
        if(paViewMonth > 11){ paViewMonth = 0; paViewYear += 1; }
        paRenderCalendar();
      });
    }

    if(paNextBtn){
      paNextBtn.addEventListener("click", () => {
        if(!(state.paSelectedDate && state.paSelectedTime)) return;

        document.getElementById("pa2Title").textContent = state.meetingTitle;
        document.getElementById("pa2When").textContent = state.paSelectedWhenText;
        document.getElementById("pa2Tz").textContent = state.timeZone;

        show("invite_propose_02");
      });
    }

    const paConfirmBtn = document.getElementById("paConfirmBtn");
    if(paConfirmBtn){
      paConfirmBtn.addEventListener("click", () => {
        document.getElementById("paDoneWhen").textContent = state.paSelectedWhenText;
        document.getElementById("paDoneTitle").textContent = state.meetingTitle;
        show("invite_propose_done");
      });
    }

    const paDoneBtn = document.getElementById("paDoneBtn");
    if(paDoneBtn){
      paDoneBtn.addEventListener("click", done);
    }

    // Render propose calendar once on load
    paRenderCalendar();

    // Initial back visibility
    backBtn.style.visibility = "hidden";

  </script>
</body>
</html>
